import{u as F,R as G,g as M,b as I,v as U,_ as A}from"./programa.74d2dbb6.js";import{o as t,c as N,j as u,d as D,b,U as L,e as V,h as l,g as o,i as e,F as f,k as w,n as g,l as a,m as B,w as v,p as z,t as x,u as T,a as q,f as J,r as K,T as O}from"./index.2279e464.js";function Q(S,c){return t(),N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[u("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}const W={key:0,class:"flex flex-col"},X={class:"flex-1"},Y={class:"py-6"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},ee={class:"flex items-center justify-center","aria-label":"Progress"},se={role:"list",class:"flex items-center"},te=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),oe={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},re={class:"sr-only"},ae=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),ie={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},ne=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),le={class:"sr-only"},ce=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),de={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},ue=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),_e={class:"sr-only"},me={key:0},he={class:"divide-y divide-gray-200"},fe={class:"min-w-0 flex-1 text-sm"},ge=["for"],xe={id:"comments-description",class:"text-gray-500 flex gap-2"},pe={class:"ml-3 flex items-center h-5"},ve=["id"],be={key:1,class:"flex flex-col space-y-4 mt-10"},ye={class:"text-lg leading-6 font-medium text-gray-900 uppercase"},ke={class:"space-y-4"},we={class:"relative block bg-white border rounded-lg shadow-sm px-6 py-4 cursor-pointer sm:flex sm:justify-between focus:outline-none"},Ce={class:"flex items-center"},Ee={class:"text-sm flex flex-col"},Be=z(" Grupo: "),$e=z(" Docente: "),Se={class:"block sm:inline"},Pe={class:"text-xs"},je={key:0},Me=e("span",{class:"text-red-500"},[e("b",null," No hay cupo disponible ")],-1),Fe=[Me],Ne={key:1},De={class:"font-medium text-gray-900"},Ve={class:"ml-1 text-gray-500 sm:ml-0"},ze=D({emits:["finishMatricula"],setup(S,{emit:c}){const d=b([{id:"01",name:"Iniciar",description:"",href:"",status:"complete"},{id:"02",name:"Cursos",description:"",href:"cursos",status:"current"},{id:"03",name:"Horarios",description:"",href:"horarios",status:"upcoming"}]),_=F(),p=L(),C=V(),m=async()=>{d.value[1].status="complete",d.value[2].status="current";const{status:h}=await _.get_cursos_grupos_by_cursos();h!==200&&x("Error al obtener los cursos",{type:"danger",hideProgressBar:!0})},E=(h,i)=>{if(i.numero_registros>=i.limite_registros){x("El grupo seleccionado ya est\xE1 lleno",{type:"danger",hideProgressBar:!0});return}h.grupos.forEach(s=>{s.checked=!1}),i.checked=!i.checked},y=b(!1),k=async()=>{if(y.value)return;y.value=!0;const{status:h}=await _.save_cursos_grupos();if(h!==201){x("Error al guardar los cursos",{type:"danger",hideProgressBar:!0});return}x("Matricula Completada Correctamente!",{type:"success",hideProgressBar:!0}),C.get_reporte_matricula_pdf(),c("finishMatricula",!0),p.push("/horarios"),y.value=!1};return(h,i)=>l(_).get_cursos_list.length>0?(t(),o("div",W,[e("main",X,[e("div",Y,[e("div",Z,[e("nav",ee,[e("ol",se,[(t(!0),o(f,null,w(d.value,(s,n)=>(t(),o("li",{key:s.name,class:g(["relative",[n!==d.value.length-1?"pr-8 sm:pr-20":""]])},[s.status==="complete"?(t(),o(f,{key:0},[te,e("a",oe,[u(l(Q),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",re,a(s.name),1)])],64)):s.status==="current"?(t(),o(f,{key:1},[ae,e("a",ie,[ne,e("span",le,a(s.name),1)])],64)):(t(),o(f,{key:2},[ce,e("a",de,[ue,e("span",_e,a(s.name),1)])],64))],2))),128))])]),d.value[1].status==="current"?(t(),o("div",me,[e("div",he,[(t(!0),o(f,null,w(l(_).get_cursos_list,(s,n)=>(t(),o("div",{key:n,class:"relative flex items-start py-4"},[e("div",fe,[e("label",{for:`check-${s.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,a(s.nombre)+" ("+a(s.codigo)+")",1)],8,ge),e("p",xe,[e("span",null,"Ciclo: "+a(s.ciclo),1),e("span",null,"Creditos: "+a(s.creditos),1)])]),e("div",pe,[e("input",{id:`check-${s.id}`,type:"checkbox",name:"check","aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,ve)])]))),128))]),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:m}," Continuar matricula ")])])):B("",!0),d.value[2].status==="current"?(t(),o("div",be,[e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k}," Guardar matricula ")]),(t(!0),o(f,null,w(l(_).curso_grupo_list,(s,n)=>(t(),o("div",{key:n},[e("h2",ye,[e("b",null,a(s.curso_nombre),1)]),u(l(U),{class:"mt-2"},{default:v(()=>[e("div",ke,[(t(!0),o(f,null,w(s.grupos,(r,P)=>(t(),N(l(I),{key:P,as:"template",value:r,class:g([r.checked?"bg-green-50 border-l-8 border-green-400":"",r.numero_registros>=r.limite_registros?"bg-red-50":""]),disabled:r.numero_registros>=r.limite_registros,onClick:j=>E(s,r)},{default:v(({checked:j,active:H})=>[e("div",we,[e("div",Ce,[e("span",Ee,[u(l(G),{as:"span",class:"font-medium text-gray-900"},{default:v(()=>[Be,e("b",null,a(r.grupo),1)]),_:2},1024),u(l(M),{as:"span",class:"text-gray-500"},{default:v(()=>[$e,e("span",Se,[e("b",null,a(r.docente),1)])]),_:2},1024)])]),e("div",Pe,[(t(!0),o(f,null,w(r.horarios,($,R)=>(t(),o("ul",{key:R},[e("li",null,a($.dia)+" de "+a($.hora_inicio)+" a "+a($.hora_fin),1)]))),128))]),u(l(M),{as:"span",class:"mt-2 flex text-sm sm:mt-0 sm:flex-col sm:ml-4 sm:text-right"},{default:v(()=>[r.numero_registros>=r.limite_registros?(t(),o("div",je,Fe)):(t(),o("div",Ne,[e("span",De,a(r.numero_registros),1),e("span",Ve,"/"+a(r.limite_registros),1)]))]),_:2},1024),e("span",{class:g(["absolute -inset-px rounded-lg pointer-events-none",[H?"border":"border-2",j?"border-indigo-500":"border-transparent"]]),"aria-hidden":"true"},null,2)])]),_:2},1032,["value","class","disabled","onClick"]))),128))])]),_:2},1024)]))),128)),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k}," Guardar matricula ")])])):B("",!0)])])])])):B("",!0)}}),He=O('<div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path></svg><h2 class="mt-2 text-lg font-medium text-gray-900"> No ha iniciado matr\xEDcula </h2><p class="mt-1 text-sm text-gray-500"> Por favor haga clic en el bot\xF3n de abajo para iniciar la matr\xEDcula. </p></div>',1),Re={class:"mt-6 flex w-full justify-center"},Ge={class:"text-center"},Ie=e("h2",{class:"mt-2 text-lg font-medium text-gray-900"}," Estudiante ya realiz\xF3 matr\xEDcula ",-1),Ue=e("p",{class:"mt-1 text-sm text-gray-500"}," Para ver los horarios de clases, por favor haga clic en el bot\xF3n de abajo. ",-1),Ae=e("button",{class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Ver Horario ",-1),Le={key:1},Je=D({setup(S){const c=F(),d=T(),_=q(),p=b(!1),C=b(!1),m=b(!1),E=b(!0);J(async()=>{if(m.value=!1,await c.get_periodo_active(),!c.periodo.is_active_matricula){x("No se puede matricular, no hay periodo activo",{type:"info",position:"top-right",hideProgressBar:!0}),m.value=!1,E.value=!1;return}await d.get_user_data_by_token(),await _.get_alumno(d.persona_id);const{data:i}=await c.get_matricula_by_expediente_active();m.value=i.length<=0,C.value=!0,c.get_horarios_matriculados_by_expediente()});const y=async()=>{if((await c.get_cursos_by_programa_id(_.alumno.programa_id)).status!==200){x("Error al obtener los cursos",{type:"danger",hideProgressBar:!0});return}p.value=!0},k=V(),h=async()=>{const{status:i,data:s}=await k.get_reporte_matricula_pdf();if(i!==200){x("Error al obtener el reporte",{type:"danger",hideProgressBar:!0});return}const n=document.createElement("a");n.target="_blank",n.href=k.get_media_url(s.path),n.click()};return(i,s)=>{const n=K("router-link"),r=A;return E.value?(t(),o("div",{key:0,class:g(C.value?"block":"hidden")},[e("div",{class:g(m.value?"block":"hidden")},[e("div",{class:g(["py-6",p.value?"hidden":"block"])},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},[e("div",null,[He,e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:y}," Iniciar matr\xEDcula ")])])])],2),u(ze,{class:g(p.value?"block":"hidden"),onFinishMatricula:s[0]||(s[0]=P=>(m.value=!1,p.value=!1))},null,8,["class"])],2),e("div",{class:g(m.value?"hidden":"block")},[e("div",Re,[e("div",Ge,[Ie,Ue,l(c).curso_grupo_list.length>0?(t(),o("button",{key:0,class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:h}," Descargar Ficha de Matricula ")):B("",!0),u(n,{to:"/horarios",class:"mx-2"},{default:v(()=>[Ae]),_:1})])])],2)],2)):(t(),o("div",Le,[u(r,{message:"El periodo de matriculas ya finaliz\xF3!"})]))}}});export{Je as default};
