import{_ as F}from"./alert.b8f6e1e0.js";import{d as G,l as T,u as X,b as u,e as L,t as d,o as r,f as a,g as e,w as B,v as J,h as s,i as A,F as x,j as k,k as c,n as O,m as S,p as b,q as Q,s as m,x as Z}from"./index.f9849cfc.js";import{u as H}from"./docente.35a77a9f.js";import{r as K}from"./CheckIcon.70ea120a.js";const W={class:"flex flex-col"},Y={class:"flex-1"},ee={class:"py-6"},te=e("div",{class:"uppercase font-bold text-xl border-b-2 mb-6"},[e("h1",null,"Acta de Notas Aplazado")],-1),se=["value"],oe={key:0,class:"py-6"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},ae={class:"flex items-center justify-center","aria-label":"Progress"},ne={role:"list",class:"flex items-center"},ie=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),le={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},de={class:"sr-only"},ce=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),ue={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},_e=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),me={class:"sr-only"},pe=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),fe={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},ge=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),he={class:"sr-only"},xe={key:0},be={class:"min-w-0 flex-1 text-md"},ye=["for"],ve=e("br",null,null,-1),we={class:"ml-3 flex items-center h-5"},ke=["id","value"],ze={class:"mt-6 flex"},Pe={key:1},Ce={class:"px-4 sm:px-6 lg:px-8"},Be={class:"sm:flex sm:items-center"},Ee={class:"sm:flex-auto"},$e=e("h1",{class:"text-2xl font-semibold text-gray-800"}," ALUMNOS ",-1),je={class:"flex flex-row items-center w-full text-xl my-4"},Ae={as:"span",class:"font-medium text-gray-900 w-9/12"},Se={as:"span",class:"font-medium text-gray-900 w-3/12"},De={class:"flex flex-row items-center w-full text-xl my-4"},Ne={as:"span",class:"font-medium text-gray-900 w-9/12"},Ve={class:"flex flex-row items-center w-full text-lg my-4"},Me={key:0,as:"span",class:"font-medium text-gray-900 w-4/12"},Ue=e("span",{class:"text-blue-500"},"Sin Publicar",-1),qe={key:1,as:"span",class:"font-medium text-gray-900 w-4/12"},Ie=e("span",{class:"text-green-500"},"Publicado",-1),Re={key:2,as:"span",class:"font-medium text-gray-900 w-4/12"},Fe=e("span",{class:"text-red-500"},"Acta Cerrada",-1),Ge={class:"sm:flex sm:items-center justify-end"},Te={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Xe={class:"mt-4 flex flex-col"},Le={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Je={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},Oe={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Qe={class:"min-w-full divide-y divide-gray-300"},Ze=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"}," N\xB0 "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Alumno "),e("th",{scope:"col",class:"px-3 py-3.5 text-sm font-semibold text-gray-900 text-center"}," N\xB0 Documento "),e("th",{scope:"col",class:"px-3 py-3.5 text-sm font-semibold text-gray-900 text-center"}," Promedio Final ")])],-1),He={class:"divide-y divide-gray-200 bg-white"},Ke={class:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center"},We={class:"text-gray-900"},Ye={class:"whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-6"},et={class:"flex items-center"},tt={class:"h-10 w-10 flex-shrink-0"},st=["src"],ot={class:"ml-4"},rt={class:"font-medium text-gray-900"},at={class:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center"},nt={class:"text-gray-900"},it={key:0,class:"whitespace-nowrap px-3 py-2 text-sm text-gray-700 text-center"},lt={class:"text-gray-900 font-bold"},dt={key:1,class:"whitespace-nowrap px-3 py-2 text-sm text-gray-700 text-center"},ct=["onUpdate:modelValue"],ut={class:"mt-6 flex"},_t={key:1,class:"py-6"},xt=G({__name:"aplazado",setup(mt){const E=T(),n=H(),y=X(),D=u(!1),N=u(0),z=u(""),V=u(""),P=u(""),p=u(0),w=u(0),$=u(""),f=u(!1),_=u(!1),g=u([{id:"01",name:"Cursos",description:"",href:"",status:"current"},{id:"02",name:"Notas",description:"",href:"notas",status:"upcoming"}]),h=u(0);L(async()=>{await y.get_periodo_active(),await y.get_periodos_by_aplazado_by_docente_id(),y.periodos_aplazados.length>0&&(h.value=y.periodos_aplazados[y.periodos_aplazados.length-1].id);const{status:i}=await n.get_cursos_aplazado_by_docente(h.value);i!==200?d("Error al obtener los cursos",{type:"danger",position:"top-right",hideProgressBar:!0}):D.value=!0});const M=async i=>{if(i===0){d("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}g.value[0].status="complete",g.value[1].status="current",z.value=n.cursos_docente.filter(t=>t.aplazado_id==i)[0].curso_nombre,P.value=n.cursos_docente.filter(t=>t.aplazado_id==i)[0].programa_nombre,p.value=n.cursos_docente.filter(t=>t.aplazado_id==i)[0].aplazado_id,$.value=n.cursos_docente.filter(t=>t.aplazado_id==i)[0].resolucion;const{data:o}=await n.get_estado_notas_curso_aplazado_by_id(p.value);f.value=o.is_publicado,_.value=o.is_cerrado;const{status:l}=await n.get_alumnos_aplazado_by_curso(p.value);l!==200&&d("Error al obtener Datos",{type:"danger",hideProgressBar:!0})},U=()=>{g.value[1].status="upcoming",g.value[0].status="current",n.alumnos_curso=[],N.value=0,V.value="",z.value="",P.value=""},j=async(i,o)=>{if(i===0){d("Error, Debe seleccionar un  cursos para continuar",{type:"danger",hideProgressBar:!0});return}const{status:l}=await n.save_notas_aplazado(i,h.value,o);l!==200?d("Error al guardar notas,verifique que todos los campos sean correctos",{type:"danger",hideProgressBar:!0}):d("Notas guardadas correctamente",{type:"success",hideProgressBar:!0})},q=async i=>{for(let l=0;l<n.alumnos_curso.length;l++)if(n.alumnos_curso[l].promedio_final_aplazado===null){d("Error, Debe ingresar notas para todos los alumnos",{type:"danger",hideProgressBar:!0});return}if(i===0){d("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}const{status:o}=await n.publicar_notas_aplazado(i);if(o!==200)d("Error al publicar notas",{type:"danger",hideProgressBar:!0});else{d("Notas publicadas correctamente",{type:"success",hideProgressBar:!0});const{data:l}=await n.get_estado_notas_curso_aplazado_by_id(i);f.value=l.is_publicado,_.value=l.is_cerrado}},I=async i=>{if(i===0){d("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}const{status:o}=await n.cerrar_acta_aplazado(i);if(o!==200)d("Error al cerrar acta",{type:"danger",hideProgressBar:!0});else{d("Acta cerrada correctamente",{type:"success",hideProgressBar:!0});const{data:l}=await n.get_estado_notas_curso_aplazado_by_id(i);f.value=l.is_publicado,_.value=l.is_cerrado}},R=async i=>{const{status:o,data:l}=await E.get_reporte_actanotas_aplazado_pdf(i,h.value);o!==200&&d("Error al imprimir acta",{type:"danger",hideProgressBar:!0});const t=document.createElement("a");t.target="_blank",t.href=l.path,t.click()};return(i,o)=>{const l=F;return r(),a("div",W,[e("main",Y,[e("div",ee,[te,B(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>A(h)?h.value=t:null),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:o[1]||(o[1]=t=>s(n).get_cursos_aplazado_by_docente(s(h)))},[(r(!0),a(x,null,k(s(y).periodos_aplazados,t=>(r(),a("option",{key:t.id,value:t.id},c(t.nombre),9,se))),128))],544),[[J,s(h)]])]),s(n).cursos_docente.length>0?(r(),a("div",oe,[e("div",re,[e("nav",ae,[e("ol",ne,[(r(!0),a(x,null,k(s(g),(t,v)=>(r(),a("li",{key:t.name,class:O(["relative",[v!==s(g).length-1?"pr-8 sm:pr-20":""]])},[t.status==="complete"?(r(),a(x,{key:0},[ie,e("a",le,[S(s(K),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",de,c(t.name),1)])],64)):t.status==="current"?(r(),a(x,{key:1},[ce,e("a",ue,[_e,e("span",me,c(t.name),1)])],64)):(r(),a(x,{key:2},[pe,e("a",fe,[ge,e("span",he,c(t.name),1)])],64))],2))),128))])]),s(g)[0].status==="current"?(r(),a("div",xe,[(r(!0),a(x,null,k(s(n).cursos_docente,(t,v)=>(r(),a("div",{key:v,class:"relative flex items-start py-4 border rounded-lg px-4 my-2"},[e("div",be,[e("label",{for:`check-${t.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,[b(c(t.curso_nombre)+" ("+c(t.resolucion)+") ",1),ve,b(c(t.programa_nombre),1)])],8,ye)]),e("div",we,[B(e("input",{id:`${t.id}`,"onUpdate:modelValue":o[2]||(o[2]=C=>A(w)?w.value=C:null),type:"radio",name:"radio",value:`${t.aplazado_id}`,"aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,ke),[[Q,s(w)]])])]))),128)),e("div",ze,[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:o[3]||(o[3]=t=>M(s(w)))}," Continuar ")])])):m("",!0),s(g)[1].status==="current"?(r(),a("div",Pe,[e("div",Ce,[e("div",Be,[e("div",Ee,[$e,e("div",je,[e("p",Ae,[b(" Curso: "),e("b",null,c(s(z)),1)]),e("p",Se,[e("b",null,c(s($)),1)])]),e("div",De,[e("p",Ne,[b(" Programa: "),e("b",null,c(s(P)),1)])]),e("div",Ve,[s(f)===!1&&s(_)===!1?(r(),a("p",Me,[b(" Estado: "),Ue])):m("",!0),s(f)===!0&&s(_)===!1?(r(),a("p",qe,[b(" Estado: "),Ie])):m("",!0),s(f)===!0&&s(_)===!0?(r(),a("p",Re,[b(" Estado: "),Fe])):m("",!0)])])]),e("div",Ge,[e("div",Te,[s(_)===!1?(r(),a("button",{key:0,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto",onClick:o[4]||(o[4]=t=>j(s(p),s(n).alumnos_curso))}," Guardar ")):m("",!0),s(f)===!1?(r(),a("button",{key:1,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:w-auto",onClick:o[5]||(o[5]=t=>q(s(p)))}," Publicar ")):m("",!0),s(f)===!0&&s(_)===!1?(r(),a("button",{key:2,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-yellow-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 sm:w-auto",onClick:o[6]||(o[6]=t=>I(s(p)))}," Cerrar Acta ")):m("",!0),s(_)===!0?(r(),a("button",{key:3,type:"button",class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:w-auto",onClick:o[7]||(o[7]=t=>R(s(p)))}," Imprimir Acta ")):m("",!0),e("button",{type:"button",class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:w-auto",onClick:o[8]||(o[8]=t=>U())}," Atras ")])]),e("div",Xe,[e("div",Le,[e("div",Je,[e("div",Oe,[e("table",Qe,[Ze,e("tbody",He,[(r(!0),a(x,null,k(s(n).alumnos_curso,(t,v)=>(r(),a("tr",{key:v},[e("td",Ke,[e("div",We,c(v+1),1)]),e("td",Ye,[e("div",et,[e("div",tt,[e("img",{class:"h-8 w-8 rounded-full",src:t.foto?s(E).get_media_url(t.foto):"https://th.bing.com/th/id/R.e62421c9ba5aeb764163aaccd64a9583?rik=DzXjlnhTgV5CvA&riu=http%3a%2f%2fcdn.onlinewebfonts.com%2fsvg%2fimg_210318.png&ehk=952QCsChZS0znBch2iju8Vc%2fS2aIXvqX%2f0zrwkjJ3GA%3d&risl=&pid=ImgRaw&r=0",alt:""},null,8,st)]),e("div",ot,[e("div",rt,c(`${t.apellido_paterno} ${t.apellido_materno}, ${t.nombres}`),1)])])]),e("td",at,[e("div",nt,c(t.numero_documento),1)]),s(_)?(r(),a("td",it,[e("div",lt,c(t.promedio_final_aplazado),1)])):(r(),a("td",dt,[B(e("input",{"onUpdate:modelValue":C=>t.promedio_final_aplazado=C,type:"text",max:20,min:0,step:.01,class:"focus:ring-blue-500 h-6 w-4/12 border-gray-700 rounded"},null,8,ct),[[Z,t.promedio_final_aplazado]])]))]))),128))])])])])])])]),e("div",ut,[s(_)===!1?(r(),a("button",{key:0,class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:o[9]||(o[9]=t=>j(s(p),s(n).alumnos_curso))}," Guardar ")):m("",!0)])])):m("",!0)])])):(r(),a("div",_t,[S(l,{message:"El Docente no tiene Cursos activos en este  periodo"})]))])])}}});export{xt as default};
