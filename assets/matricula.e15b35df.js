import{o as t,c as P,k as m,d as F,b as k,U as G,e as D,l as c,g as r,h as e,F as u,i as y,n as _,j as o,m as S,w as p,p as N,t as b,u as I,a as U,f as A,r as L,T}from"./index.49ebfc8b.js";import{u as V,R as q,g as M,b as J,v as K}from"./programa.ccf4bec5.js";function O($,v){return t(),P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}const Q={key:0,class:"flex flex-col"},W={class:"flex-1"},X={class:"py-6"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},Z={class:"flex items-center justify-center","aria-label":"Progress"},ee={role:"list",class:"flex items-center"},se=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),te={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},re={class:"sr-only"},oe=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),ae={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},ne=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),ie={class:"sr-only"},le=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),ce={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},de=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),ue={class:"sr-only"},me={key:0},_e={class:"divide-y divide-gray-200"},he={class:"min-w-0 flex-1 text-sm"},fe=["for"],ge={id:"comments-description",class:"text-gray-500 flex gap-2"},xe={class:"ml-3 flex items-center h-5"},pe=["id"],be={key:1,class:"flex flex-col space-y-4 mt-10"},ve={class:"text-lg leading-6 font-medium text-gray-900 uppercase"},ye={class:"space-y-4"},ke={class:"relative block bg-white border rounded-lg shadow-sm px-6 py-4 cursor-pointer sm:flex sm:justify-between focus:outline-none"},we={class:"flex items-center"},Ce={class:"text-sm flex flex-col"},Ee=N(" Grupo: "),Be=N(" Docente: "),Se={class:"block sm:inline"},$e={class:"text-xs"},je={key:0},Me=e("span",{class:"text-red-500"},[e("b",null," No hay cupo disponible ")],-1),Pe=[Me],Fe={key:1},De={class:"font-medium text-gray-900"},Ne={class:"ml-1 text-gray-500 sm:ml-0"},Ve=F({emits:["finishMatricula"],setup($,{emit:v}){const l=k([{id:"01",name:"Iniciar",description:"",href:"",status:"complete"},{id:"02",name:"Cursos",description:"",href:"cursos",status:"current"},{id:"03",name:"Horarios",description:"",href:"horarios",status:"upcoming"}]),d=V(),f=G(),w=D(),h=async()=>{l.value[1].status="complete",l.value[2].status="current";const{status:n}=await d.get_cursos_grupos_by_cursos();n!==200&&b("Error al obtener los cursos",{type:"danger",hideProgressBar:!0})},E=(n,i)=>{if(i.numero_registros>=i.limite_registros){b("El grupo seleccionado ya est\xE1 lleno",{type:"danger",hideProgressBar:!0});return}n.grupos.forEach(s=>{s.checked=!1}),i.checked=!i.checked},g=k(!1),C=async()=>{if(g.value)return;g.value=!0;const{status:n}=await d.save_cursos_grupos();if(n!==201){b("Error al guardar los cursos",{type:"danger",hideProgressBar:!0});return}b("Matricula Completada Correctamente!",{type:"success",hideProgressBar:!0}),w.get_reporte_matricula_pdf(),v("finishMatricula",!0),f.push("/horarios"),g.value=!1};return(n,i)=>c(d).get_cursos_list.length>0?(t(),r("div",Q,[e("main",W,[e("div",X,[e("div",Y,[e("nav",Z,[e("ol",ee,[(t(!0),r(u,null,y(l.value,(s,x)=>(t(),r("li",{key:s.name,class:_(["relative",[x!==l.value.length-1?"pr-8 sm:pr-20":""]])},[s.status==="complete"?(t(),r(u,{key:0},[se,e("a",te,[m(c(O),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",re,o(s.name),1)])],64)):s.status==="current"?(t(),r(u,{key:1},[oe,e("a",ae,[ne,e("span",ie,o(s.name),1)])],64)):(t(),r(u,{key:2},[le,e("a",ce,[de,e("span",ue,o(s.name),1)])],64))],2))),128))])]),l.value[1].status==="current"?(t(),r("div",me,[e("div",_e,[(t(!0),r(u,null,y(c(d).get_cursos_list,(s,x)=>(t(),r("div",{key:x,class:"relative flex items-start py-4"},[e("div",he,[e("label",{for:`check-${s.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,o(s.nombre)+" ("+o(s.codigo)+")",1)],8,fe),e("p",ge,[e("span",null,"Ciclo: "+o(s.ciclo),1),e("span",null,"Creditos: "+o(s.creditos),1)])]),e("div",xe,[e("input",{id:`check-${s.id}`,type:"checkbox",name:"check","aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,pe)])]))),128))]),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:h}," Continuar matricula ")])])):S("",!0),l.value[2].status==="current"?(t(),r("div",be,[e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:C}," Guardar matricula ")]),(t(!0),r(u,null,y(c(d).curso_grupo_list,(s,x)=>(t(),r("div",{key:x},[e("h2",ve,[e("b",null,o(s.curso_nombre),1)]),m(c(K),{class:"mt-2"},{default:p(()=>[e("div",ye,[(t(!0),r(u,null,y(s.grupos,(a,z)=>(t(),P(c(J),{key:z,as:"template",value:a,class:_([a.checked?"bg-green-50 border-l-8 border-green-400":"",a.numero_registros>=a.limite_registros?"bg-red-50":""]),disabled:a.numero_registros>=a.limite_registros,onClick:j=>E(s,a)},{default:p(({checked:j,active:H})=>[e("div",ke,[e("div",we,[e("span",Ce,[m(c(q),{as:"span",class:"font-medium text-gray-900"},{default:p(()=>[Ee,e("b",null,o(a.grupo),1)]),_:2},1024),m(c(M),{as:"span",class:"text-gray-500"},{default:p(()=>[Be,e("span",Se,[e("b",null,o(a.docente),1)])]),_:2},1024)])]),e("div",$e,[(t(!0),r(u,null,y(a.horarios,(B,R)=>(t(),r("ul",{key:R},[e("li",null,o(B.dia)+" de "+o(B.hora_inicio)+" a "+o(B.hora_fin),1)]))),128))]),m(c(M),{as:"span",class:"mt-2 flex text-sm sm:mt-0 sm:flex-col sm:ml-4 sm:text-right"},{default:p(()=>[a.numero_registros>=a.limite_registros?(t(),r("div",je,Pe)):(t(),r("div",Fe,[e("span",De,o(a.numero_registros),1),e("span",Ne,"/"+o(a.limite_registros),1)]))]),_:2},1024),e("span",{class:_(["absolute -inset-px rounded-lg pointer-events-none",[H?"border":"border-2",j?"border-indigo-500":"border-transparent"]]),"aria-hidden":"true"},null,2)])]),_:2},1032,["value","class","disabled","onClick"]))),128))])]),_:2},1024)]))),128)),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:C}," Guardar matricula ")])])):S("",!0)])])])])):S("",!0)}}),ze=T('<div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path></svg><h2 class="mt-2 text-lg font-medium text-gray-900"> No ha iniciado matr\xEDcula </h2><p class="mt-1 text-sm text-gray-500"> Por favor haga clic en el bot\xF3n de abajo para iniciar la matr\xEDcula. </p></div>',1),He={class:"mt-6 flex w-full justify-center"},Re={class:"text-center"},Ge=e("h2",{class:"mt-2 text-lg font-medium text-gray-900"}," Estudiante ya realiz\xF3 matr\xEDcula ",-1),Ie=e("p",{class:"mt-1 text-sm text-gray-500"}," Para ver los horarios de clases, por favor haga clic en el bot\xF3n de abajo. ",-1),Ue=e("button",{class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Ver Horario ",-1),Te=F({setup($){const v=V(),l=I(),d=U(),f=k(!1),w=k(!1),h=k(!1);A(async()=>{h.value=!1,await l.get_user_data_by_token(),await d.get_alumno(l.persona_id);const{data:n}=await v.get_matricula_by_expediente_active();h.value=n.length<=0,w.value=!0});const E=async()=>{if((await v.get_cursos_by_programa_id(d.alumno.programa_id)).status!==200){b("Error al obtener los cursos",{type:"danger",hideProgressBar:!0});return}f.value=!0},g=D(),C=async()=>{const{status:n,data:i}=await g.get_reporte_matricula_pdf();if(n!==200){b("Error al obtener el reporte",{type:"danger",hideProgressBar:!0});return}const s=document.createElement("a");s.href=g.get_media_url(i.path),s.click()};return(n,i)=>{const s=L("router-link");return t(),r("div",{class:_(w.value?"block":"hidden")},[e("div",{class:_(h.value?"block":"hidden")},[e("div",{class:_(["py-6",f.value?"hidden":"block"])},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},[e("div",null,[ze,e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:E}," Iniciar matr\xEDcula ")])])])],2),m(Ve,{class:_(f.value?"block":"hidden"),onFinishMatricula:i[0]||(i[0]=x=>(h.value=!1,f.value=!1))},null,8,["class"])],2),e("div",{class:_(h.value?"hidden":"block")},[e("div",He,[e("div",Re,[Ge,Ie,e("button",{class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:C}," Descargar Ficha de Matricula "),m(s,{to:"/horarios",class:"mx-2"},{default:p(()=>[Ue]),_:1})])])],2)],2)}}});export{Te as default};
