import{o as s,c as M,i as m,d as P,m as E,Q as R,T as F,j as l,e as o,g as e,F as u,f as p,n as $,h as r,U as v,w as f,k as D,t as b,u as G,a as I,b as U,r as A,M as L}from"./index.2bfcd10c.js";import{u as N,R as T,g as j,b as Q,v as q}from"./programa.c5a415c0.js";function J(S,g){return s(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[m("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}const K={key:0,class:"flex flex-col"},O={class:"flex-1"},W={class:"py-6"},X={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},Y={class:"flex items-center justify-center","aria-label":"Progress"},Z={role:"list",class:"flex items-center"},ee=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),se={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},te={class:"sr-only"},oe=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),re={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},ae=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),ne={class:"sr-only"},ie=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),le={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},ce=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),de={class:"sr-only"},ue={key:0},me={class:"divide-y divide-gray-200"},_e={class:"min-w-0 flex-1 text-sm"},he=["for"],fe={id:"comments-description",class:"text-gray-500 flex gap-2"},ge={class:"ml-3 flex items-center h-5"},xe=["id"],pe={key:1,class:"flex flex-col space-y-4 mt-10"},be=e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Guardar matricula ")],-1),ve={class:"text-lg leading-6 font-medium text-gray-900 uppercase"},ye={class:"space-y-4"},we={class:"relative block bg-white border rounded-lg shadow-sm px-6 py-4 cursor-pointer sm:flex sm:justify-between focus:outline-none"},ke={class:"flex items-center"},Ce={class:"text-sm flex flex-col"},$e=D(" Grupo: "),Ee=D(" Docente: "),Se={class:"block sm:inline"},Be={class:"text-xs"},je={key:0},Me=e("span",{class:"text-red-500"},[e("b",null," No hay cupo disponible ")],-1),Pe=[Me],Fe={key:1},De={class:"font-medium text-gray-900"},Ne={class:"ml-1 text-gray-500 sm:ml-0"},Ve=P({emits:["finishMatricula"],setup(S,{emit:g}){const i=E([{id:"01",name:"Iniciar",description:"",href:"",status:"complete"},{id:"02",name:"Cursos",description:"",href:"cursos",status:"current"},{id:"03",name:"Horarios",description:"",href:"horarios",status:"upcoming"}]),c=N(),x=R(),_=F(),y=async()=>{i.value[1].status="complete",i.value[2].status="current";const{status:n}=await c.get_cursos_grupos_by_cursos();n!==200&&b("Error al obtener los cursos",{type:"danger",hideProgressBar:!0})},w=(n,d)=>{if(d.numero_registros>=d.limite_registros){b("El grupo seleccionado ya est\xE1 lleno",{type:"danger",hideProgressBar:!0});return}n.grupos.forEach(t=>{t.checked=!1}),d.checked=!d.checked},k=async()=>{const{status:n}=await c.save_cursos_grupos();if(n!==201){b("Error al guardar los cursos",{type:"danger",hideProgressBar:!0});return}b("Matricula Completada Correctamente!",{type:"success",hideProgressBar:!0}),_.get_reporte_matricula_pdf(),g("finishMatricula",!0),x.push("/horarios")};return(n,d)=>l(c).get_cursos_list.length>0?(s(),o("div",K,[e("main",O,[e("div",W,[e("div",X,[e("nav",Y,[e("ol",Z,[(s(!0),o(u,null,p(i.value,(t,h)=>(s(),o("li",{key:t.name,class:$(["relative",[h!==i.value.length-1?"pr-8 sm:pr-20":""]])},[t.status==="complete"?(s(),o(u,{key:0},[ee,e("a",se,[m(l(J),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",te,r(t.name),1)])],64)):t.status==="current"?(s(),o(u,{key:1},[oe,e("a",re,[ae,e("span",ne,r(t.name),1)])],64)):(s(),o(u,{key:2},[ie,e("a",le,[ce,e("span",de,r(t.name),1)])],64))],2))),128))])]),i.value[1].status==="current"?(s(),o("div",ue,[e("div",me,[(s(!0),o(u,null,p(l(c).get_cursos_list,(t,h)=>(s(),o("div",{key:h,class:"relative flex items-start py-4"},[e("div",_e,[e("label",{for:`check-${t.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,r(t.nombre)+" ("+r(t.codigo)+")",1)],8,he),e("p",fe,[e("span",null,"Ciclo: "+r(t.ciclo),1),e("span",null,"Creditos: "+r(t.creditos),1)])]),e("div",ge,[e("input",{id:`check-${t.id}`,type:"checkbox",name:"check","aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,xe)])]))),128))]),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:y}," Continuar matricula ")])])):v("",!0),i.value[2].status==="current"?(s(),o("div",pe,[be,(s(!0),o(u,null,p(l(c).curso_grupo_list,(t,h)=>(s(),o("div",{key:h},[e("h2",ve,[e("b",null,r(t.curso_nombre),1)]),m(l(q),{class:"mt-2"},{default:f(()=>[e("div",ye,[(s(!0),o(u,null,p(t.grupos,(a,V)=>(s(),M(l(Q),{key:V,as:"template",value:a,class:$([a.checked?"bg-green-50 border-l-8 border-green-400":"",a.numero_registros>=a.limite_registros?"bg-red-50":""]),disabled:a.numero_registros>=a.limite_registros,onClick:B=>w(t,a)},{default:f(({checked:B,active:z})=>[e("div",we,[e("div",ke,[e("span",Ce,[m(l(T),{as:"span",class:"font-medium text-gray-900"},{default:f(()=>[$e,e("b",null,r(a.grupo),1)]),_:2},1024),m(l(j),{as:"span",class:"text-gray-500"},{default:f(()=>[Ee,e("span",Se,[e("b",null,r(a.docente),1)])]),_:2},1024)])]),e("div",Be,[(s(!0),o(u,null,p(a.horarios,(C,H)=>(s(),o("ul",{key:H},[e("li",null,r(C.dia)+" de "+r(C.hora_inicio)+" a "+r(C.hora_fin),1)]))),128))]),m(l(j),{as:"span",class:"mt-2 flex text-sm sm:mt-0 sm:flex-col sm:ml-4 sm:text-right"},{default:f(()=>[a.numero_registros>=a.limite_registros?(s(),o("div",je,Pe)):(s(),o("div",Fe,[e("span",De,r(a.numero_registros),1),e("span",Ne,"/"+r(a.limite_registros),1)]))]),_:2},1024),e("span",{class:$(["absolute -inset-px rounded-lg pointer-events-none",[z?"border":"border-2",B?"border-indigo-500":"border-transparent"]]),"aria-hidden":"true"},null,2)])]),_:2},1032,["value","class","disabled","onClick"]))),128))])]),_:2},1024)]))),128)),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k}," Guardar matricula ")])])):v("",!0)])])])])):v("",!0)}}),ze={key:0},He={key:0,class:"py-6"},Re=L('<div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path></svg><h2 class="mt-2 text-lg font-medium text-gray-900"> No ha iniciado matr\xEDcula </h2><p class="mt-1 text-sm text-gray-500"> Por favor haga clic en el bot\xF3n de abajo para iniciar la matr\xEDcula. </p></div>',1),Ge={key:1},Ie={class:"mt-6 flex w-full justify-center"},Ue={class:"text-center"},Ae=e("h2",{class:"mt-2 text-lg font-medium text-gray-900"}," Estudiante ya realiz\xF3 matr\xEDcula ",-1),Le=e("p",{class:"mt-1 text-sm text-gray-500"}," Para ver los horarios de clases, por favor haga clic en el bot\xF3n de abajo. ",-1),Te=e("button",{class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Ver Horario ",-1),Je=P({setup(S){const g=N(),i=G(),c=I(),x=E(!1),_=E(!1);U(async()=>{_.value=!1,await i.get_user_data_by_token(),await c.get_alumno(i.persona_id);const{data:n}=await g.get_matricula_by_expediente_active();_.value=n.length<=0});const y=async()=>{if((await g.get_cursos_by_programa_id(c.alumno.programa_id)).status!==200){b("Error al obtener los cursos",{type:"danger",hideProgressBar:!0});return}x.value=!0},w=F(),k=()=>{w.get_reporte_matricula_pdf()};return(n,d)=>{const t=A("router-link");return _.value?(s(),o("div",ze,[x.value?v("",!0):(s(),o("div",He,[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},[e("div",null,[Re,e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:y}," Iniciar matr\xEDcula ")])])])])),m(Ve,{onFinishMatricula:d[0]||(d[0]=h=>(_.value=!1,x.value=!1))})])):(s(),o("div",Ge,[e("div",Ie,[e("div",Ue,[Ae,Le,e("button",{class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:k}," Descar Ficha de Matricula "),m(t,{to:"/horarios",class:"mx-2"},{default:f(()=>[Te]),_:1})])])]))}}});export{Je as default};
