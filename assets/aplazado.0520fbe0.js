import{_ as F}from"./alert.d640deda.js";import{d as G,k as I,u as R,b as u,e as T,t as i,o,f as r,g as e,w as $,v as X,h as p,F as b,i as k,j as d,n as L,l as A,m as h,p as J,q as m,s as O}from"./index.89a57496.js";import{u as Q}from"./docente.52b5e12a.js";import{r as Z}from"./CheckIcon.ecb14909.js";const H={class:"flex flex-col"},K={class:"flex-1"},W={class:"py-6"},Y=e("div",{class:"uppercase font-bold text-xl border-b-2 mb-6"},[e("h1",null,"Acta de Notas Aplazado")],-1),ee=["value"],te={key:0,class:"py-6"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},oe={class:"flex items-center justify-center","aria-label":"Progress"},re={role:"list",class:"flex items-center"},ae=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),ne={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},le={class:"sr-only"},ie=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),de={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},ce=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),ue={class:"sr-only"},_e=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),me={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},pe=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),fe={class:"sr-only"},ge={key:0},he={class:"min-w-0 flex-1 text-md"},xe=["for"],be=e("br",null,null,-1),ve={class:"ml-3 flex items-center h-5"},ye=["id","value"],we={class:"mt-6 flex"},ke={key:1},ze={class:"px-4 sm:px-6 lg:px-8"},Pe={class:"sm:flex sm:items-center"},Ce={class:"sm:flex-auto"},Be=e("h1",{class:"text-2xl font-semibold text-gray-800"}," ALUMNOS ",-1),Ee={class:"flex flex-row items-center w-full text-xl my-4"},$e={as:"span",class:"font-medium text-gray-900 w-9/12"},je=h(" Curso: "),Ae={as:"span",class:"font-medium text-gray-900 w-3/12"},Se=h(" Grupo: "),De={class:"flex flex-row items-center w-full text-xl my-4"},Ne={as:"span",class:"font-medium text-gray-900 w-9/12"},Ve=h(" Programa: "),Me={class:"flex flex-row items-center w-full text-lg my-4"},Ue={key:0,as:"span",class:"font-medium text-gray-900 w-4/12"},qe=h(" Estado: "),Fe=e("span",{class:"text-blue-500"},"Sin Publicar",-1),Ge=[qe,Fe],Ie={key:1,as:"span",class:"font-medium text-gray-900 w-4/12"},Re=h(" Estado: "),Te=e("span",{class:"text-green-500"},"Publicado",-1),Xe=[Re,Te],Le={key:2,as:"span",class:"font-medium text-gray-900 w-4/12"},Je=h(" Estado: "),Oe=e("span",{class:"text-red-500"},"Acta Cerrada",-1),Qe=[Je,Oe],Ze={class:"sm:flex sm:items-center justify-end"},He={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Ke={class:"mt-4 flex flex-col"},We={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ye={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},et={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},tt={class:"min-w-full divide-y divide-gray-300"},st=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"}," N\xB0 "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Alumno "),e("th",{scope:"col",class:"px-3 py-3.5 text-sm font-semibold text-gray-900 text-center"}," N\xB0 Documento "),e("th",{scope:"col",class:"px-3 py-3.5 text-sm font-semibold text-gray-900 text-center"}," Promedio Final ")])],-1),ot={class:"divide-y divide-gray-200 bg-white"},rt={class:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center"},at={class:"text-gray-900"},nt={class:"whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-6"},lt={class:"flex items-center"},it={class:"h-10 w-10 flex-shrink-0"},dt=["src"],ct={class:"ml-4"},ut={class:"font-medium text-gray-900"},_t={class:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center"},mt={class:"text-gray-900"},pt={key:0,class:"whitespace-nowrap px-3 py-2 text-sm text-gray-700 text-center"},ft={class:"text-gray-900 font-bold"},gt={key:1,class:"whitespace-nowrap px-3 py-2 text-sm text-gray-700 text-center"},ht=["onUpdate:modelValue","step"],xt={class:"mt-6 flex"},bt={key:1,class:"py-6"},Pt=G({setup(vt){const z=I(),n=Q(),v=R(),S=u(!1),x=u(0),P=u(""),C=u(""),B=u(""),w=u(0),f=u(!1),c=u(!1),g=u([{id:"01",name:"Cursos",description:"",href:"",status:"current"},{id:"02",name:"Notas",description:"",href:"notas",status:"upcoming"}]),D=u(0),y=u(0);T(async()=>{await v.get_periodo_active(),await v.get_periodos_by_aplazado_by_docente_id(),v.periodos_aplazados.length>0&&(y.value=v.periodos_aplazados[v.periodos_aplazados.length-1].id);const{status:a}=await n.get_cursos_aplazado_by_docente(y.value);a!==200?i("Error al obtener los cursos",{type:"danger",position:"top-right",hideProgressBar:!0}):S.value=!0});const N=async a=>{if(a===0){i("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}g.value[0].status="complete",g.value[1].status="current",C.value=n.cursos_docente.filter(t=>t.id==a)[0].grupo,P.value=n.cursos_docente.filter(t=>t.id==a)[0].curso_nombre,B.value=n.cursos_docente.filter(t=>t.id==a)[0].programa_nombre,w.value=n.cursos_docente.filter(t=>t.id==a)[0].aplazado_id;const{data:s}=await n.get_estado_notas_curso_aplazado_by_id(w.value);f.value=s.is_publicado,c.value=s.is_cerrado;const{status:l}=await n.get_alumnos_aplazado_by_curso(a);l!==200&&i("Error al obtener Datos",{type:"danger",hideProgressBar:!0})},V=()=>{g.value[1].status="upcoming",g.value[0].status="current",n.alumnos_curso=[],x.value=0,C.value="",P.value="",B.value=""},j=async(a,s)=>{if(a===0){i("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}const{status:l}=await n.save_notas_aplazado(a,y.value,s);l!==200?i("Error al guardar notas,verifique que todos los campos sean correctos",{type:"danger",hideProgressBar:!0}):i("Notas guardadas correctamente",{type:"success",hideProgressBar:!0})},M=async a=>{for(let l=0;l<n.alumnos_curso.length;l++)if(n.alumnos_curso[l].promedio_final_aplazado===null){i("Error, Debe ingresar notas para todos los alumnos",{type:"danger",hideProgressBar:!0});return}if(a===0){i("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}const{status:s}=await n.publicar_notas_aplazado(a);if(s!==200)i("Error al publicar notas",{type:"danger",hideProgressBar:!0});else{i("Notas publicadas correctamente",{type:"success",hideProgressBar:!0});const{data:l}=await n.get_estado_notas_curso_aplazado_by_id(a);f.value=l.is_publicado,c.value=l.is_cerrado}},U=async a=>{if(a===0){i("Error, Debe seleccionar un  curso para continuar",{type:"danger",hideProgressBar:!0});return}const{status:s}=await n.cerrar_acta_aplazado(a);if(s!==200)i("Error al cerrar acta",{type:"danger",hideProgressBar:!0});else{i("Acta cerrada correctamente",{type:"success",hideProgressBar:!0});const{data:l}=await n.get_estado_notas_curso_aplazado_by_id(a);f.value=l.is_publicado,c.value=l.is_cerrado}},q=async(a,s)=>{const{status:l,data:t}=await z.get_reporte_actanotas_aplazado_pdf(a,s,y.value);l!==200&&i("Error al imprimir acta",{type:"danger",hideProgressBar:!0});const _=document.createElement("a");_.target="_blank",_.href=z.get_media_url(t.path),_.click()};return(a,s)=>{const l=F;return o(),r("div",H,[e("main",K,[e("div",W,[Y,$(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:s[1]||(s[1]=t=>p(n).get_cursos_by_docente(D.value))},[(o(!0),r(b,null,k(p(v).periodos_aplazados,t=>(o(),r("option",{key:t.id,value:t.id},d(t.nombre),9,ee))),128))],544),[[X,y.value]])]),p(n).cursos_docente.length>0?(o(),r("div",te,[e("div",se,[e("nav",oe,[e("ol",re,[(o(!0),r(b,null,k(g.value,(t,_)=>(o(),r("li",{key:t.name,class:L(["relative",[_!==g.value.length-1?"pr-8 sm:pr-20":""]])},[t.status==="complete"?(o(),r(b,{key:0},[ae,e("a",ne,[A(p(Z),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",le,d(t.name),1)])],64)):t.status==="current"?(o(),r(b,{key:1},[ie,e("a",de,[ce,e("span",ue,d(t.name),1)])],64)):(o(),r(b,{key:2},[_e,e("a",me,[pe,e("span",fe,d(t.name),1)])],64))],2))),128))])]),g.value[0].status==="current"?(o(),r("div",ge,[(o(!0),r(b,null,k(p(n).cursos_docente,(t,_)=>(o(),r("div",{key:_,class:"relative flex items-start py-4 border rounded-lg px-4 my-2"},[e("div",he,[e("label",{for:`check-${t.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,[h(d(t.curso_nombre)+" ("+d(t.grupo)+") ",1),be,h(d(t.programa_nombre),1)])],8,xe)]),e("div",ve,[$(e("input",{id:`-${t.id}`,"onUpdate:modelValue":s[2]||(s[2]=E=>x.value=E),type:"radio",name:"radio",value:`${t.id}`,"aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,ye),[[J,x.value]])])]))),128)),e("div",we,[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:s[3]||(s[3]=t=>N(x.value))}," Continuar ")])])):m("",!0),g.value[1].status==="current"?(o(),r("div",ke,[e("div",ze,[e("div",Pe,[e("div",Ce,[Be,e("div",Ee,[e("p",$e,[je,e("b",null,d(P.value),1)]),e("p",Ae,[Se,e("b",null,d(C.value),1)])]),e("div",De,[e("p",Ne,[Ve,e("b",null,d(B.value),1)])]),e("div",Me,[f.value===!1&&c.value===!1?(o(),r("p",Ue,Ge)):m("",!0),f.value===!0&&c.value===!1?(o(),r("p",Ie,Xe)):m("",!0),f.value===!0&&c.value===!0?(o(),r("p",Le,Qe)):m("",!0)])])]),e("div",Ze,[e("div",He,[c.value===!1?(o(),r("button",{key:0,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto",onClick:s[4]||(s[4]=t=>j(x.value,p(n).alumnos_curso))}," Guardar ")):m("",!0),f.value===!1?(o(),r("button",{key:1,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:w-auto",onClick:s[5]||(s[5]=t=>M(w.value))}," Publicar ")):m("",!0),f.value===!0&&c.value===!1?(o(),r("button",{key:2,class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-yellow-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 sm:w-auto",onClick:s[6]||(s[6]=t=>U(w.value))}," Cerrar Acta ")):m("",!0),c.value===!0?(o(),r("button",{key:3,type:"button",class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:w-auto",onClick:s[7]||(s[7]=t=>q(x.value,w.value))}," Imprimir Acta ")):m("",!0),e("button",{type:"button",class:"mx-2 inline-flex items-center justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:w-auto",onClick:s[8]||(s[8]=t=>V())}," Atras ")])]),e("div",Ke,[e("div",We,[e("div",Ye,[e("div",et,[e("table",tt,[st,e("tbody",ot,[(o(!0),r(b,null,k(p(n).alumnos_curso,(t,_)=>(o(),r("tr",{key:_},[e("td",rt,[e("div",at,d(_+1),1)]),e("td",nt,[e("div",lt,[e("div",it,[e("img",{class:"h-8 w-8 rounded-full",src:t.foto?p(z).get_media_url(t.foto):"https://th.bing.com/th/id/R.e62421c9ba5aeb764163aaccd64a9583?rik=DzXjlnhTgV5CvA&riu=http%3a%2f%2fcdn.onlinewebfonts.com%2fsvg%2fimg_210318.png&ehk=952QCsChZS0znBch2iju8Vc%2fS2aIXvqX%2f0zrwkjJ3GA%3d&risl=&pid=ImgRaw&r=0",alt:""},null,8,dt)]),e("div",ct,[e("div",ut,d(`${t.apellido_paterno} ${t.apellido_materno}, ${t.nombres}`),1)])])]),e("td",_t,[e("div",mt,d(t.numero_documento),1)]),c.value?(o(),r("td",pt,[e("div",ft,d(t.promedio_final_aplazado.toFixed(2)),1)])):(o(),r("td",gt,[$(e("input",{"onUpdate:modelValue":E=>t.promedio_final_aplazado=E,type:"text",max:20,min:0,step:.01,class:"focus:ring-blue-500 h-6 w-4/12 border-gray-700 rounded"},null,8,ht),[[O,t.promedio_final_aplazado]])]))]))),128))])])])])])])]),e("div",xt,[c.value===!1?(o(),r("button",{key:0,class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:s[9]||(s[9]=t=>j(x.value,p(n).alumnos_curso))}," Guardar ")):m("",!0)])])):m("",!0)])])):(o(),r("div",bt,[A(l,{message:"El Docente no tiene Cursos activos en este  periodo"})]))])])}}});export{Pt as default};
