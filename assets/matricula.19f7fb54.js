import{o as s,c as z,k as d,d as F,e as t,f as e,t as o,a as h,u as i,F as g,h as j,n as y,g as D,l as $,M as L,z as V,L as U,A,p as P,j as w,b as G,r as H,w as q,m as T,i as R}from"./index.96397d6f.js";import{U as I,b as J,a as K,u as O,r as Q,c as W}from"./programa.c3feefff.js";function X(N,f){return s(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}const Y={class:"bg-teal-50 border-l-4 border-teal-400 p-4"},Z={class:"flex"},ee={class:"ml-3"},se={class:"text-sm text-teal-700"},te=F({props:{message:{type:String,required:!1,default:"Ingrese su mensaje"}},setup(N){const f=N;return(m,r)=>(s(),t("div",Y,[e("div",Z,[e("div",ee,[e("p",se,o(f.message),1)])])]))}}),ae={key:0,class:"flex flex-col"},oe={class:"flex-1"},re={class:"py-6"},ie={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},le={class:"flex items-center justify-center","aria-label":"Progress"},ne={role:"list",class:"flex items-center"},ce=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-indigo-600"})],-1),de={class:"relative w-8 h-8 flex items-center justify-center bg-indigo-600 rounded-full hover:bg-indigo-900"},ue={class:"sr-only"},me=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),_e={href:"#",class:"relative w-8 h-8 flex items-center justify-center bg-white border-2 border-indigo-600 rounded-full","aria-current":"step"},he=e("span",{class:"h-2.5 w-2.5 bg-indigo-600 rounded-full","aria-hidden":"true"},null,-1),xe={class:"sr-only"},ge=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"h-0.5 w-full bg-gray-200"})],-1),fe={href:"#",class:"group relative w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full hover:border-gray-400"},pe=e("span",{class:"h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300","aria-hidden":"true"},null,-1),ve={class:"sr-only"},be={key:0},ye={class:"divide-y divide-gray-200"},we={class:"min-w-0 flex-1 text-sm"},ke=["for"],$e={id:"comments-description",class:"text-gray-500 flex gap-2"},Ce={class:"ml-3 flex items-center h-5"},Be=["id","onChange"],Ee={key:1,class:"flex flex-col space-y-4 mt-10"},Me={class:"text-lg leading-6 font-medium text-gray-900 uppercase"},je={class:"space-y-4"},Pe={class:"relative block bg-white border rounded-lg shadow-sm px-6 py-4 cursor-pointer sm:flex sm:justify-between focus:outline-none"},Ne={class:"flex items-center"},Se={class:"text-sm flex flex-col"},De=P(" Grupo: "),Fe=P(" Docente: "),Ve={class:"block sm:inline"},ze={class:"text-xs"},Ie={key:0},Le=e("span",{class:"text-red-500"},[e("b",null," No hay cupo disponible ")],-1),Ue=[Le],Ae={key:1},Ge={class:"font-medium text-gray-900"},He={class:"ml-1 text-gray-500 sm:ml-0"},qe=F({emits:["finishMatricula"],setup(N,{emit:f}){const m=h([{id:"01",name:"Iniciar",description:"",href:"",status:"complete"},{id:"02",name:"Cursos",description:"",href:"cursos",status:"current"},{id:"03",name:"Horarios",description:"",href:"horarios",status:"upcoming"}]),r=I(),u=h([]),C=h(!1),p=n=>{u.value.includes(n.id)?u.value=u.value.filter(_=>_!==n.id):u.value.push(n.id)},S=async()=>{if(u.value.length===0)w("Debe selecionar al menos un curso para continuar",{type:"danger",hideProgressBar:!0});else{m.value[1].status="complete",m.value[2].status="current";const{status:n}=await r.get_cursos_grupos_by_cursos(u.value);n!==200&&w("Error al obtener los cursos",{type:"danger",hideProgressBar:!0})}},v=(n,_)=>{if(_.numero_registros>=_.limite_registros){w("El grupo seleccionado ya est\xE1 lleno",{type:"danger",hideProgressBar:!0});return}n.grupos.forEach(a=>{a.checked=!1}),_.checked=!_.checked},E=async()=>{if(C.value)return;C.value=!0;const{status:n}=await r.save_cursos_grupos();if(n!==201){w("Error al guardar los cursos",{type:"danger",hideProgressBar:!0});return}w("Matricula Completada Correctamente!",{type:"success",hideProgressBar:!0}),f("finishMatricula",!0),C.value=!1};return(n,_)=>i(r).get_cursos_list.length>0?(s(),t("div",ae,[e("main",oe,[e("div",re,[e("div",ie,[e("nav",le,[e("ol",ne,[(s(!0),t(g,null,j(m.value,(a,k)=>(s(),t("li",{key:a.name,class:y(["relative",[k!==m.value.length-1?"pr-8 sm:pr-20":""]])},[a.status==="complete"?(s(),t(g,{key:0},[ce,e("a",de,[d(i(X),{class:"w-5 h-5 text-white","aria-hidden":"true"}),e("span",ue,o(a.name),1)])],64)):a.status==="current"?(s(),t(g,{key:1},[me,e("a",_e,[he,e("span",xe,o(a.name),1)])],64)):(s(),t(g,{key:2},[ge,e("a",fe,[pe,e("span",ve,o(a.name),1)])],64))],2))),128))])]),m.value[1].status==="current"?(s(),t("div",be,[e("div",ye,[(s(!0),t(g,null,j(i(r).get_cursos_list,(a,k)=>(s(),t("div",{key:k,class:"relative flex items-start py-4"},[e("div",we,[e("label",{for:`check-${a.id}`,class:"font-medium text-gray-700 w-full"},[e("b",null,o(a.nombre)+" ("+o(a.codigo)+")",1)],8,ke),e("p",$e,[e("span",null,"Ciclo: "+o(a.ciclo),1),e("span",null,"Creditos: "+o(a.creditos),1)])]),e("div",Ce,[e("input",{id:`check-${a.id}`,type:"checkbox",name:"check","aria-describedby":"comments-description",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded",onChange:l=>p(a)},null,40,Be)])]))),128))]),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:S}," Continuar matricula ")])])):D("",!0),m.value[2].status==="current"?(s(),t("div",Ee,[e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:E}," Guardar matricula ")]),(s(!0),t(g,null,j(i(r).curso_grupo_list,(a,k)=>(s(),t("div",{key:k},[e("h2",Me,[e("b",null,o(a.curso_nombre),1)]),d(i(A),{class:"mt-2"},{default:$(()=>[e("div",je,[(s(!0),t(g,null,j(a.grupos,(l,x)=>(s(),z(i(U),{key:x,as:"template",value:l,class:y([l.checked?"bg-green-50 border-l-8 border-green-400":"",l.numero_registros>=l.limite_registros?"bg-red-50":""]),disabled:l.numero_registros>=l.limite_registros,onClick:c=>v(a,l)},{default:$(({checked:c,active:b})=>[e("div",Pe,[e("div",Ne,[e("span",Se,[d(i(L),{as:"span",class:"font-medium text-gray-900"},{default:$(()=>[De,e("b",null,o(l.grupo),1)]),_:2},1024),d(i(V),{as:"span",class:"text-gray-500"},{default:$(()=>[Fe,e("span",Ve,[e("b",null,o(l.docente),1)])]),_:2},1024)])]),e("div",ze,[(s(!0),t(g,null,j(l.horarios,(B,M)=>(s(),t("ul",{key:M},[e("li",null,o(B.dia)+" de "+o(B.hora_inicio)+" a "+o(B.hora_fin),1)]))),128))]),d(i(V),{as:"span",class:"mt-2 flex text-sm sm:mt-0 sm:flex-col sm:ml-4 sm:text-right"},{default:$(()=>[l.numero_registros>=l.limite_registros?(s(),t("div",Ie,Ue)):(s(),t("div",Ae,[e("span",Ge,o(l.numero_registros),1),e("span",He,"/"+o(l.limite_registros),1)]))]),_:2},1024),e("span",{class:y(["absolute -inset-px rounded-lg pointer-events-none",[b?"border":"border-2",c?"border-indigo-500":"border-transparent"]]),"aria-hidden":"true"},null,2)])]),_:2},1032,["value","class","disabled","onClick"]))),128))])]),_:2},1024)]))),128)),e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:E}," Guardar matricula ")])])):D("",!0)])])])])):D("",!0)}}),Te={class:"bg-white shadow"},Re={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},Je={class:"py-6 lg:border-t lg:border-gray-200"},Ke={class:"flex-1 min-w-0"},Oe={class:"sm:hidden","aria-label":"Back"},Qe={href:"#",class:"flex items-center text-sm font-medium text-gray-500 hover:text-gray-700"},We=P(" Back "),Xe={class:"hidden sm:flex","aria-label":"Breadcrumb"},Ye={role:"list",class:"flex items-center space-x-4"},Ze={class:"flex"},es=P(" Inicio "),ss={class:"flex items-center"},ts=P(" Matricula "),as=e("div",{class:"mt-2 md:flex md:items-center md:justify-between"},[e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-2xl font-bold leading-7 text-primary-700 sm:text-3xl sm:truncate"}," Matricular ")])],-1),os={class:"mt-4 flex-shrink-0 flex md:mt-0 md:justify-between"},rs={class:"flex flex-col w-10/12"},is={class:"flex flex-row"},ls={class:"pr-12 w-full"},ns=e("label",{for:"buscar",class:"text-xs"},"Persona:",-1),cs={class:"flex flex-row w-2/12"},ds={class:"md:items-center grid place-items-center"},us={class:"px-4 sm:px-6 lg:px-8"},ms={class:"mt-2 flex flex-col"},_s={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},hs={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},xs={class:"mx-auto mt-6 max-w-5xl px-4 sm:px-6 lg:px-8 shadow rounded-md"},gs={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 mb-4"},fs=e("div",{class:"sm:col-span-2"},[e("div",{class:"border-b border-gray-200 bg-white px-3 py-4 sm:px-2"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Estudiante ")])],-1),ps={class:"sm:col-span-1"},vs=e("dt",{class:"text-sm font-medium text-gray-500"}," N\xB0 de Documento ",-1),bs={class:"mt-1 text-sm text-gray-900"},ys={class:"sm:col-span-1"},ws=e("dt",{class:"text-sm font-medium text-gray-500"}," N\xB0 Expediente ",-1),ks={class:"mt-1 text-sm text-gray-900"},$s={class:"sm:col-span-1"},Cs=e("dt",{class:"text-sm font-medium text-gray-500"}," Nombres ",-1),Bs={class:"mt-1 text-sm text-gray-900"},Es={class:"sm:col-span-1"},Ms=e("dt",{class:"text-sm font-medium text-gray-500"}," Apellidos ",-1),js={class:"mt-1 text-sm text-gray-900"},Ps={class:"sm:col-span-2 mb-4"},Ns=e("dt",{class:"text-sm font-medium text-gray-500"}," Programa ",-1),Ss={class:"mt-1 text-sm text-gray-900"},Ds={class:"px-4 sm:px-6 lg:px-8"},Fs={class:"mt-2 flex flex-col"},Vs={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},zs={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},Is={class:"mx-auto mt-6 max-w-5xl px-4 sm:px-6 lg:px-8 shadow rounded-md"},Ls={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 mb-4"},Us=e("div",{class:"sm:col-span-2"},[e("div",{class:"border-b border-gray-200 bg-white px-3 py-4 sm:px-2"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Matricula ")])],-1),As={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},Gs={key:0},Hs=R('<div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path></svg><h2 class="mt-2 text-lg font-medium text-gray-900"> No ha iniciado matr\xEDcula </h2><p class="mt-1 text-sm text-gray-500"> Por favor haga clic en el bot\xF3n de abajo para iniciar la matr\xEDcula. </p></div>',1),qs={key:1},Ts={class:"m-6 flex w-full justify-center"},Rs={class:"text-center mb-6"},Js=e("h2",{class:"mt-2 text-lg font-medium text-gray-900"}," Estudiante ya realiz\xF3 matr\xEDcula ",-1),Ks=e("p",{class:"mt-1 text-sm text-gray-500"}," Para descargar la ficha de matricula, por favor haga clic en el bot\xF3n de abajo. ",-1),Os={key:1,class:"sm:col-span-2"},Xs=F({setup(N){const f=h(""),m=J(),r=K(),u=I(),C=O(),p=h(!1),S=h(!1),v=h(!1),E=h(!0),n=h(!1),_=h("");G(async()=>{p.value=!1});const a=async x=>{await r.get_alumno_by_dni(x),v.value=!1,p.value=!1,n.value=!1,await m.get_periodo_active(),m.periodo.is_active_matricula||(w("No se puede matricular, no hay periodo activo",{type:"info",position:"top-right",hideProgressBar:!0}),v.value=!1,E.value=!1);const{data:c}=await u.get_matricula_by_expediente_active(r.alumno.id);v.value=c.length<=0,S.value=!0,u.get_horarios_matriculados_by_expediente(r.alumno.id)},k=async()=>{const x=await u.get_cursos_by_programa_id(r.alumno.programa_id,r.alumno.id);if(x.status!==200){w("Error al obtener los cursos",{type:"danger",hideProgressBar:!0});return}u.cursos_list.length>0?p.value=!0:(n.value=!0,_.value=x.data.mensaje)},l=async()=>{const{status:x,data:c}=await C.get_reporte_matricula_pdf(r.alumno.id,m.periodo.id);if(x!==200){w("Error al obtener el reporte",{type:"danger",hideProgressBar:!0});return}const b=document.createElement("a");b.target="_blank",b.href=C.get_media_url(c.path),b.click()};return(x,c)=>{const b=H("router-link"),B=te;return s(),t(g,null,[e("div",Te,[e("div",Re,[e("div",Je,[e("div",Ke,[e("nav",Oe,[e("a",Qe,[d(i(Q),{class:"flex-shrink-0 -ml-1 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),We])]),e("nav",Xe,[e("ol",Ye,[e("li",null,[e("div",Ze,[d(b,{to:"inicio",class:"text-sm font-medium text-gray-500 hover:text-gray-700"},{default:$(()=>[es]),_:1})])]),e("li",null,[e("div",ss,[d(i(W),{class:"flex-shrink-0 h-5 w-5 text-gray-400","aria-hidden":"true"}),d(b,{to:"matriculas",class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:$(()=>[ts]),_:1})])])])])]),as,e("div",os,[e("div",rs,[e("div",is,[e("div",ls,[ns,q(e("input",{id:"buscar","onUpdate:modelValue":c[0]||(c[0]=M=>f.value=M),type:"text",name:"buscar",placeholder:"Buscar DNI",class:"mt-0 shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md"},null,512),[[T,f.value]])])])]),e("div",cs,[e("div",ds,[e("button",{type:"button",class:"ml-0 w-full items-center px-4 border border-transparent mt-9 rounded-md shadow-sm font-medium text-white bg-primary-500 hover:bg-cyan-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:c[1]||(c[1]=M=>a(f.value))}," Buscar ")])])])])])]),e("div",us,[e("div",ms,[e("div",_s,[e("div",hs,[e("div",xs,[e("dl",gs,[fs,e("div",ps,[vs,e("dd",bs,o(i(r).alumno.numero_documento),1)]),e("div",ys,[ws,e("dd",ks,o(i(r).alumno.id),1)]),e("div",$s,[Cs,e("dd",Bs,o(i(r).alumno.nombres),1)]),e("div",Es,[Ms,e("dd",js,o(i(r).alumno.apellido_paterno)+" "+o(i(r).alumno.apellido_materno),1)]),e("div",Ps,[Ns,e("dd",Ss,o(i(r).alumno.programa_nombre),1)])])])])])])]),e("div",Ds,[e("div",Fs,[e("div",Vs,[e("div",zs,[e("div",Is,[e("dl",Ls,[Us,E.value?(s(),t("div",{key:0,class:y([S.value?"block":"hidden","sm:col-span-2"])},[e("div",{class:y(v.value?"block":"hidden")},[e("div",{class:y(["py-6",p.value?"hidden":"block"])},[e("div",As,[n.value==!1?(s(),t("div",Gs,[Hs,e("div",{class:"mt-6 flex"},[e("button",{class:"mx-auto flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k}," Iniciar matr\xEDcula ")])])):(s(),t("div",qs,[d(B,{message:_.value},null,8,["message"])]))])],2),d(qe,{class:y(p.value?"block":"hidden"),onFinishMatricula:c[2]||(c[2]=M=>(v.value=!1,p.value=!1))},null,8,["class"])],2),e("div",{class:y(v.value?"hidden":"block")},[e("div",Ts,[e("div",Rs,[Js,Ks,i(u).curso_grupo_list.length>0?(s(),t("button",{key:0,class:"mx-auto mt-3 flex-shrink-0 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:l}," Descargar Ficha de Matricula ")):D("",!0)])])],2)],2)):(s(),t("div",Os,[d(B,{message:"El periodo de matriculas ya finaliz\xF3!"})]))])])])])])])],64)}}});export{Xs as default};
